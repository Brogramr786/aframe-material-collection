!function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=50)}({10:function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-password-input",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"ui-text":{type:"password",placeHolder:""},"ui-double-click":{}},mappings:{width:"ui-text.width",height:"ui-text.height",value:"ui-text.value","place-holder":"ui-text.placeHolder"}}))},13:function(e,t){if("undefined"==typeof CanvasInput)throw'aframe-material-collection requires CanvasInput to be loaded first - <script src="https://cdn.rawgit.com/shaneharris/CanvasInput/master/CanvasInput.js"><\/script>';e.exports=AFRAME.registerComponent("ui-text",{schema:{width:{type:"number",default:.5},height:{type:"number",default:.1},value:{default:""},type:{default:"text"},lineFocusColor:{default:"#009688"},lineBlurColor:{default:"#cfcfcf"},disabledColor:{default:"#afafaf"},disabled:{type:"boolean",default:!1},fontFamily:{default:"Roboto"},fontColor:{default:"#4f4f4f"},placeHolder:{default:"Text..."},intersectableClass:{default:"intersectable"}},init(){this.backing=document.createElement("a-plane"),this.backing.setAttribute("width",this.data.width),this.backing.setAttribute("height",this.data.height),this.backing.setAttribute("class",this.data.intersectableClass+" no-yoga-layout"),this.backing.setAttribute("opacity",0),this.backing.setAttribute("scale","1 1 0"),this.el.appendChild(this.backing),this.textMaterial=new THREE.MeshBasicMaterial,this.textPlane=new THREE.Mesh(new THREE.PlaneGeometry(this.data.width,this.data.height),this.textMaterial),this.el.object3D.add(this.textPlane),this.textPlane.position.set(0,0,1e-4),this.underLine=document.createElement("a-plane"),this.underLine.setAttribute("width",this.data.width-.05),this.underLine.setAttribute("height",.005),this.underLine.setAttribute("position","0 -0.05 0.001"),this.underLine.setAttribute("class","no-yoga-layout"),this.underLine.setAttribute("shader","flat"),this.underLine.setAttribute("color",this.data.disabled?this.data.disabledColor:this.data.lineBlurColor),this.el.appendChild(this.underLine),this.el.addEventListener("click",e=>this.focus()),this.el.addEventListener("dblclick",e=>this.select()),this.blurHandler=(()=>this.blur()),this.setValue()},tick(){this.is_focussed&&(this.el.sceneEl.canvas_input.render(),this.textMaterial.map.needsUpdate=!0)},numberOnly(e,t){-1!==[46,8,9,27,13,110].indexOf(e.keyCode)||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||67===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||88===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||e.keyCode>=35&&e.keyCode<=39||(t?/^\d*((\.)|(\.\d+))?$/g:/^\d*?$/g).test(this.el.sceneEl.canvas_input.value()+e.key)||e.preventDefault()},floatOnly(e){return this.numberOnly(e,!0)},setValue(){this.setupCanvasInput(),this.el.sceneEl.canvas_input.render();let e=new Image;e.src=this.el.sceneEl.canvas_input.renderCanvas().toDataURL("image/png");let t=new THREE.Texture(e);t.needsUpdate=!0,t.minFilter=THREE.LinearFilter,this.textMaterial=new THREE.MeshBasicMaterial({map:t}),this.textPlane.material=this.textMaterial,this.setClippingPlanes()},select(){this.el.sceneEl.canvas_input.selectText()},focus(){UI.utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),this.resetCanvasInput(),this.el.sceneEl.canvas_input.focus(),this.el.sceneEl.canvas_input.onkeydown(e=>{"number"===this.data.type?this.floatOnly(e):"int"===this.data.type&&this.numberOnly(e)}),this.data.value===this.data.placeHolder&&this.el.sceneEl.canvas_input.value(""),this.textMaterial=new THREE.MeshBasicMaterial({map:new THREE.Texture(this.el.sceneEl.canvas_input.renderCanvas())}),this.textPlane.material=this.textMaterial,this.setClippingPlanes(),this.underLine.setAttribute("color",this.data.lineFocusColor),this.textMaterial.map.minFilter=THREE.LinearFilter,this.is_focussed=!0,this.el.sceneEl.renderer.domElement.addEventListener("mousedown",this.blurHandler)},setClippingPlanes(){this.el._content_clips&&(this.textMaterial.clippingPlanes=this.el._content_clips,this.textMaterial.clipShadows=!0)},blur(){this.is_focussed=!1,this.el.sceneEl.renderer.domElement.removeEventListener("mousedown",this.blurHandler);let e=this.el.sceneEl.canvas_input.value();this.data.value=e,this.underLine.setAttribute("color",this.data.lineBlurColor),this.el.sceneEl.canvas_input.blur(),this.setValue(),UI.utils.stoppedChanging(this.el.object3D.uuid)},resetCanvasInput(){this.el.sceneEl.canvas_input&&(this.el.sceneEl.canvas_input.width(300*(this.data.width-.1)),this.el.sceneEl.canvas_input.fontFamily(this.data.fontFamily),this.el.sceneEl.canvas_input.fontColor(this.data.fontColor),this.el.sceneEl.canvas_input.placeHolder(this.data.placeHolder),this.el.sceneEl.canvas_input.value(this.data.value),this.el.sceneEl.canvas_input.borderWidth(0))},updateSchema(){this.data&&this.resetCanvasInput()},setupCanvasInput(){let e=document.getElementById("textCanvas");if(e.width=300*this.data.width,this.resetCanvasInput(),this.el.sceneEl.canvas_input)return;e.height=45;let t={canvas:e,fontSize:18,fontFamily:this.data.fontFamily,fontColor:this.data.fontColor,width:300*(this.data.width-.1),padding:12,borderWidth:0,borderRadius:0,backgroundColor:"#fff",placeHolder:this.data.placeHolder,placeHolderColor:"#cfcfcf",boxShadow:"0px 0px 0px #fff",innerShadow:"0px 0px 0px rgba(255,255,255, 1)",value:this.data.value};this.el.sceneEl.canvas_input=new CanvasInput(t)}})},50:function(e,t,i){"use strict";i.r(t);i(13),i(7),i(8),i(9),i(10)},7:function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-text-input",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"ui-text":{placeHolder:"Text..."},"ui-double-click":{}},mappings:{width:"ui-text.width",height:"ui-text.height",value:"ui-text.value","place-holder":"ui-text.placeHolder"}}))},8:function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-number-input",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"ui-text":{type:"number",placeHolder:"Number..."},"ui-double-click":{}},mappings:{width:"ui-text.width",height:"ui-text.height",value:"ui-text.value","place-holder":"ui-text.placeHolder"}}))},9:function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-int-input",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"ui-text":{type:"int",placeHolder:"Whole Number..."},"ui-double-click":{}},mappings:{width:"ui-text.width",height:"ui-text.height",value:"ui-text.value","place-holder":"ui-text.placeHolder"}}))}});