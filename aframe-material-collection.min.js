!function(e){var t={};function i(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=29)}([function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-button",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{geometry:{primitive:"plane",width:.5,height:.175},material:{color:"#009688",shader:"flat"},"ui-btn":{},"ui-rounded":{borderRadius:.0025},"ui-ripple":{size:{x:.5,y:.175},clampToSquare:!0,zIndex:.001},text:{font:"roboto",align:"center",zOffset:.002,wrapCount:10,alphaTest:.4}},mappings:{height:"geometry.height",width:"geometry.width",color:"material.color",transparent:"material.transparent","font-color":"text.color","ripple-color":"ui-ripple.color","ripple-size":"ui-ripple.size","ripple-z-index":"ui-ripple.zIndex","text-value":"text.value","wrap-count":"text.wrapCount",disabled:"ui-btn.disabled"}}))},function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-fab-button",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{geometry:{primitive:"circle",radius:.1,segments:6},material:{color:"#009688",shader:"flat"},"ui-btn":{},"ui-ripple":{size:{x:.1,y:.1},zIndex:.002,fadeDelay:300,duration:500},"ui-icon":{size:{x:.105,y:.105}}},mappings:{radius:"geometry.radius",color:"material.color",transparent:"material.transparent",src:"ui-icon.src","ripple-color":"ui-ripple.color","ripple-size":"ui-ripple.size","ripple-z-index":"ui-ripple.zIndex",disabled:"ui-btn.disabled"}}))},function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-fab-button-small",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{geometry:{primitive:"circle",radius:.075,segments:6},material:{color:"#009688",shader:"flat"},"ui-btn":{},"ui-ripple":{size:{x:.125,y:.125},zIndex:-.001,color:"#ff0000"},"ui-icon":{size:{x:.075,y:.075},src:"icons/sort_white_64dp.png"}},mappings:{radius:"geometry.radius",color:"material.color",transparent:"material.transparent",src:"ui-icon.src","ripple-color":"ui-ripple.color","ripple-size":"ui-ripple.size","ripple-z-index":"ui-ripple.zIndex",disabled:"ui-btn.disabled"}}))},function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-switch",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"ui-switch":{}},mappings:{value:"ui-switch.value",disabled:"ui-switch.disabled"}}))},function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-checkbox",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"ui-checkbox":{},"ui-ripple":{size:{x:.1,y:.1},zIndex:-.001,color:"#afafaf"}},mappings:{value:"ui-checkbox.value",disabled:"ui-checkbox.disabled",indeterminate:"ui-checkbox.indeterminate"}}))},function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-radio",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"ui-radio":{},geometry:{primitive:"ring",radiusInner:.0575,radiusOuter:.0675,segmentsTheta:6},material:{shader:"flat",color:"#afafaf"},"ui-ripple":{size:{x:.1,y:.1},zIndex:-.001,color:"#afafaf"}},mappings:{color:"ui-radio.selectedColor",value:"ui-radio.value",selected:"ui-radio.selected",disabled:"ui-radio.disabled"}}))},function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-text-input",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"ui-text":{placeHolder:"Text..."},"ui-double-click":{}},mappings:{width:"ui-text.width",height:"ui-text.height",value:"ui-text.value","place-holder":"ui-text.placeHolder"}}))},function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-number-input",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"ui-text":{type:"number",placeHolder:"Number..."},"ui-double-click":{}},mappings:{width:"ui-text.width",height:"ui-text.height",value:"ui-text.value","place-holder":"ui-text.placeHolder"}}))},function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-int-input",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"ui-text":{type:"int",placeHolder:"Whole Number..."},"ui-double-click":{}},mappings:{width:"ui-text.width",height:"ui-text.height",value:"ui-text.value","place-holder":"ui-text.placeHolder"}}))},function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-password-input",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"ui-text":{type:"password",placeHolder:""},"ui-double-click":{}},mappings:{width:"ui-text.width",height:"ui-text.height",value:"ui-text.value","place-holder":"ui-text.placeHolder"}}))},function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-scroll-pane",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"ui-scroll-pane":{}},mappings:{width:"ui-scroll-pane.width",height:"ui-scroll-pane.height","scroll-z-offset":"ui-scroll-pane.scrollZOffset","handle-color":"ui-scroll-pane.scrollHandleColor","scroll-padding":"ui-scroll-pane.scrollPadding","look-controls-el":"ui-scroll-pane.cameraEl","look-controls-component":"ui-scroll-pane.lookControlsComponent"}}))},function(e,t){e.exports=AFRAME.registerPrimitive("a-ui-renderer",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"ui-renderer":{}},mappings:{"ui-panel":"ui-renderer.uiPanel","look-controls-el":"ui-renderer.lookControlsEl","look-controls-component":"ui-renderer.lookControlsComponent","panel-position":"ui-renderer.panelPosition","panel-size":"ui-renderer.panelSize","render-resolution":"ui-renderer.renderResolution","debug-raycaster":"ui-renderer.debugRaycaster",fps:"ui-renderer.fps","intersectable-class":"ui-renderer.intersectableClass"}}))},function(e,t){if("undefined"==typeof CanvasInput)throw'aframe-material-collection requires CanvasInput to be loaded first - <script src="https://cdn.rawgit.com/shaneharris/CanvasInput/master/CanvasInput.js"><\/script>';e.exports=AFRAME.registerComponent("ui-text",{schema:{width:{type:"number",default:.5},height:{type:"number",default:.1},value:{default:""},type:{default:"text"},lineFocusColor:{default:"#009688"},lineBlurColor:{default:"#cfcfcf"},disabledColor:{default:"#afafaf"},disabled:{type:"boolean",default:!1},fontFamily:{default:"Roboto"},fontColor:{default:"#4f4f4f"},placeHolder:{default:"Text..."},intersectableClass:{default:"intersectable"}},init(){this.backing=document.createElement("a-plane"),this.backing.setAttribute("width",this.data.width),this.backing.setAttribute("height",this.data.height),this.backing.setAttribute("class",this.data.intersectableClass+" no-yoga-layout"),this.backing.setAttribute("opacity",0),this.backing.setAttribute("scale","1 1 0"),this.el.appendChild(this.backing),this.textMaterial=new THREE.MeshBasicMaterial,this.textPlane=new THREE.Mesh(new THREE.PlaneGeometry(this.data.width,this.data.height),this.textMaterial),this.el.object3D.add(this.textPlane),this.textPlane.position.set(0,0,1e-4),this.underLine=document.createElement("a-plane"),this.underLine.setAttribute("width",this.data.width-.05),this.underLine.setAttribute("height",.005),this.underLine.setAttribute("position","0 -0.05 0.001"),this.underLine.setAttribute("class","no-yoga-layout"),this.underLine.setAttribute("shader","flat"),this.underLine.setAttribute("color",this.data.disabled?this.data.disabledColor:this.data.lineBlurColor),this.el.appendChild(this.underLine),this.el.addEventListener("click",e=>this.focus()),this.el.addEventListener("dblclick",e=>this.select()),this.blurHandler=(()=>this.blur()),this.setValue()},tick(){this.is_focussed&&(this.el.sceneEl.canvas_input.render(),this.textMaterial.map.needsUpdate=!0)},numberOnly(e,t){-1!==[46,8,9,27,13,110].indexOf(e.keyCode)||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||67===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||88===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||e.keyCode>=35&&e.keyCode<=39||(t?/^\d*((\.)|(\.\d+))?$/g:/^\d*?$/g).test(this.el.sceneEl.canvas_input.value()+e.key)||e.preventDefault()},floatOnly(e){return this.numberOnly(e,!0)},setValue(){this.setupCanvasInput(),this.el.sceneEl.canvas_input.render();let e=new Image;e.src=this.el.sceneEl.canvas_input.renderCanvas().toDataURL("image/png");let t=new THREE.Texture(e);t.needsUpdate=!0,t.minFilter=THREE.LinearFilter,this.textMaterial=new THREE.MeshBasicMaterial({map:t}),this.textPlane.material=this.textMaterial,this.setClippingPlanes()},select(){this.el.sceneEl.canvas_input.selectText()},focus(){UI.utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),this.resetCanvasInput(),this.el.sceneEl.canvas_input.focus(),this.el.sceneEl.canvas_input.onkeydown(e=>{"number"===this.data.type?this.floatOnly(e):"int"===this.data.type&&this.numberOnly(e)}),this.data.value===this.data.placeHolder&&this.el.sceneEl.canvas_input.value(""),this.textMaterial=new THREE.MeshBasicMaterial({map:new THREE.Texture(this.el.sceneEl.canvas_input.renderCanvas())}),this.textPlane.material=this.textMaterial,this.setClippingPlanes(),this.underLine.setAttribute("color",this.data.lineFocusColor),this.textMaterial.map.minFilter=THREE.LinearFilter,this.is_focussed=!0,this.el.sceneEl.renderer.domElement.addEventListener("mousedown",this.blurHandler)},setClippingPlanes(){this.el._content_clips&&(this.textMaterial.clippingPlanes=this.el._content_clips,this.textMaterial.clipShadows=!0)},blur(){this.is_focussed=!1,this.el.sceneEl.renderer.domElement.removeEventListener("mousedown",this.blurHandler);let e=this.el.sceneEl.canvas_input.value();this.data.value=e,this.underLine.setAttribute("color",this.data.lineBlurColor),this.el.sceneEl.canvas_input.blur(),this.setValue(),UI.utils.stoppedChanging(this.el.object3D.uuid)},resetCanvasInput(){this.el.sceneEl.canvas_input&&(this.el.sceneEl.canvas_input.width(300*(this.data.width-.1)),this.el.sceneEl.canvas_input.fontFamily(this.data.fontFamily),this.el.sceneEl.canvas_input.fontColor(this.data.fontColor),this.el.sceneEl.canvas_input.placeHolder(this.data.placeHolder),this.el.sceneEl.canvas_input.value(this.data.value),this.el.sceneEl.canvas_input.borderWidth(0))},updateSchema(){this.data&&this.resetCanvasInput()},setupCanvasInput(){let e=document.getElementById("textCanvas");if(e.width=300*this.data.width,this.resetCanvasInput(),this.el.sceneEl.canvas_input)return;e.height=45;let t={canvas:e,fontSize:18,fontFamily:this.data.fontFamily,fontColor:this.data.fontColor,width:300*(this.data.width-.1),padding:12,borderWidth:0,borderRadius:0,backgroundColor:"#fff",placeHolder:this.data.placeHolder,placeHolderColor:"#cfcfcf",boxShadow:"0px 0px 0px #fff",innerShadow:"0px 0px 0px rgba(255,255,255, 1)",value:this.data.value};this.el.sceneEl.canvas_input=new CanvasInput(t)}})},function(e,t){e.exports=AFRAME.registerComponent("ui-btn",{schema:{duration:{type:"int",default:250},hoverHeight:{type:"number",default:.01},activeHeight:{type:"number",default:-.001},disabled:{type:"boolean",default:!1}},updateSchema(){},init(){this.defaultZ=this.el.object3D.position.z,this.data.disabled||(this.el.addEventListener("mouseenter",e=>this.mouseEnter(e)),this.el.addEventListener("mousedown",e=>this.mouseDown(e)),this.el.addEventListener("mouseup",e=>this.mouseUp(e)),this.el.addEventListener("mouseleave",e=>this.mouseLeave(e)))},mouseEnter(e){const t=this;this.tween(this.defaultZ,this.defaultZ+this.data.hoverHeight,function(){t.el.object3D.position.z=this.x},function(){t.el.object3D.position.z=t.defaultZ+t.data.hoverHeight}),this.el.emit("ui-mouse-enter",e)},mouseLeave(e){if(this.is_clicked)return this.is_clicked=!1;this.resetAnimation(this.defaultZ+this.data.hoverHeight),this.el.emit("ui-mouse-leave",e)},mouseUp(e){this.is_clicked=!0,this.resetAnimation(this.defaultZ+this.data.activeHeight),this.el.emit("ui-mouse-up",e)},mouseDown(e){const t=this;this.tween(this.defaultZ+this.data.hoverHeight,this.defaultZ+this.data.activeHeight,function(){t.el.object3D.position.z=this.x},function(){t.el.object3D.position.z=t.defaultZ+t.data.activeHeight}),this.el.emit("ui-mouse-down",e)},resetAnimation(e){let t=this;this.tween(e,this.defaultZ,function(){t.el.object3D.position.z=this.x},function(){t.el.object3D.position.z=t.defaultZ})},tween(e,t,i,s){let a=this;return UI.utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),new TWEEN.Tween({x:e}).to({x:t},this.data.duration).onUpdate(i).onComplete(function(){return UI.utils.stoppedChanging(a.el.object3D.uuid),s.call(this)}).easing(TWEEN.Easing.Exponential.Out).start()}})},function(e,t){e.exports=AFRAME.registerComponent("ui-switch",{schema:{value:{type:"boolean",default:!1},disabled:{type:"boolean",default:!1},progressColor:{default:"#4db6ac"},handleColor:{default:"#009688"},handleDisabledColor:{default:"#afafaf"},railColor:{default:"#fff"},switchDuration:{type:"int",default:350},handleZIndex:{type:"number",default:.01},intersectableClass:{default:"intersectable"}},updateSchema(){this.data&&(this.data.disabled?this.data.value&&(this.data.value=!1,this.click()):this.click(),this.setDisabled())},init(){this.width=.3,this.height=.1,this.handleEl=document.createElement("a-circle"),this.handleEl.setAttribute("radius",.055),this.handleEl.setAttribute("color",this.data.handleColor),this.handleEl.setAttribute("shader","flat"),this.handleEl.setAttribute("ui-ripple","size:0.1 0.1;color:#999;fadeDelay:300;duration:500"),this.handleEl.setAttribute("class",this.data.intersectableClass+" no-yoga-layout"),this.handleEl.setAttribute("position","-0.05 0 "+this.data.handleZIndex),this.handleEl.setAttribute("segments",6),this.el.appendChild(this.handleEl),this.railEl=document.createElement("a-plane"),this.railEl.setAttribute("width","0.15"),this.railEl.setAttribute("height","0.05"),this.railEl.setAttribute("shader","flat"),this.railEl.setAttribute("ui-rounded","borderRadius:0.025"),this.railEl.setAttribute("color",this.data.railColor),this.railEl.setAttribute("class",this.data.intersectableClass+" no-yoga-layout"),this.el.appendChild(this.railEl),this.railEl.addEventListener("rounded-loaded",()=>this.getRailObject(this.railEl.object3D)),this.clickHandler=(e=>{this.data.value=!this.data.value,this.click(),e.detail.preventDefault&&e.detail.preventDefault()}),this.setDisabled()},setDisabled(){this.data.disabled?(this.handleEl.removeEventListener("mousedown",this.clickHandler),this.handleEl.setAttribute("color",this.data.handleDisabledColor)):(this.handleEl.addEventListener("mousedown",this.clickHandler),this.handleEl.setAttribute("color",this.data.handleColor))},click(){this.tweenHandle(),this.tweenProgress()},getRailObject(e){e.traverse(e=>{e.geometry&&"ShapeGeometry"===e.geometry.type&&(this.progress=new THREE.Mesh(e.geometry.clone(),new THREE.MeshBasicMaterial({color:this.data.progressColor})),this.progress.position.set(-.075,0,.001),this.progress.scale.set(1e-5,1,1),this.el.object3D.add(this.progress))})},tweenProgress(){this.progress&&(new TWEEN.Tween(this.progress.position).to(new THREE.Vector3(this.data.value?0:-.075,0,.001),this.data.switchDuration).easing(TWEEN.Easing.Exponential.Out).start(),new TWEEN.Tween(this.progress.scale).to(new THREE.Vector3(this.data.value?1:1e-5,1,1),this.data.switchDuration).easing(TWEEN.Easing.Exponential.Out).start())},tweenHandle(){this.handleEl&&(UI.utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),new TWEEN.Tween(this.handleEl.object3D.position).to(new THREE.Vector3(this.data.value?.05:-.05,0,this.data.handleZIndex),this.data.switchDuration).onComplete(()=>{UI.utils.stoppedChanging(this.el.object3D.uuid)}).easing(TWEEN.Easing.Exponential.Out).start())}})},function(e,t){e.exports=AFRAME.registerComponent("ui-scroll-pane",{schema:{height:{type:"number",default:1.2},width:{type:"number",default:2.9},scrollPadding:{type:"number",default:.05},scrollZOffset:{type:"number",default:0},scrollHandleColor:{default:"#009688"},intersectableClass:{default:"intersectable"},cameraEl:{type:"selector"},lookControlsComponent:{default:"look-controls"}},init(){if(this.setupElements(),this.container=this.el.querySelector(".container"),void 0===this.container)throw'ui-scroll-pane needs an entity inside it with the class "container" - <a-entity class="container"></a-entity>';this.scrollBarWidth=this.rail.getAttribute("width"),this.container.setAttribute("position",-this.data.width/2+" "+this.data.height/2+" 0"),this.rail.setAttribute("position",this.data.width/2+this.data.scrollPadding+" 0 "+(this.data.scrollZOffset+2e-4)),this.handle.setAttribute("position",this.data.width/2+this.data.scrollPadding+" 0 "+(this.data.scrollZOffset+5e-4)),this.el.sceneEl.renderer.localClippingEnabled=!0,this.content_clips=[new THREE.Plane(new THREE.Vector3(0,1,0),this.data.height/2),new THREE.Plane(new THREE.Vector3(0,-1,0),this.data.height/2),new THREE.Plane(new THREE.Vector3(-1,0,0),this.data.width/2),new THREE.Plane(new THREE.Vector3(1,0,0),this.data.width/2)];const e=e=>{this.data.cameraEl&&this.data.cameraEl.components[this.data.lookControlsComponent]&&this.data.cameraEl.components[this.data.lookControlsComponent][e]()},t=e=>this.mouseMove(e);this.handle.addEventListener("mousedown",i=>{e("pause"),this.isDragging=!0,this.handlePos=this.handle.object3D.worldToLocal(i.detail.intersection.point).y,this.backgroundPanel.addEventListener("ui-mousemove",t),UI.utils.isChanging(this.el.sceneEl,this.handle.uuid),UI.utils.preventDefault(i)});const i=i=>{this.isDragging&&(this.backgroundPanel.removeEventListener("ui-mousemove",t),e("play"),this.isDragging=!1,UI.utils.stoppedChanging(this.handle.uuid),UI.utils.stoppedChanging(this.rail.uuid),UI.utils.preventDefault(i))};this.backgroundPanel.addEventListener("mouseup",i),this.backgroundPanel.addEventListener("mouseleave",i),this.rail.addEventListener("mousedown",e=>{UI.utils.isChanging(this.el.sceneEl,this.rail.uuid),this.isDragging=!0,this.handlePos=0,this.scroll(this.rail.object3D.worldToLocal(e.detail.intersection.point).y),this.backgroundPanel.addEventListener("ui-mousemove",t),UI.utils.preventDefault(e)}),this.el.sceneEl.addEventListener("loaded",()=>{this.el.sceneEl.object3D.updateMatrixWorld(),this.updateContentClips(),this.updateContent(),this.el.emit("scroll-pane-loaded")}),this.setupMouseWheelScroll()},updateContentClips(){this.content_clips[0].applyMatrix4(this.el.object3D.matrixWorld),this.content_clips[1].applyMatrix4(this.el.object3D.matrixWorld),this.content_clips[2].applyMatrix4(this.el.object3D.matrixWorld),this.content_clips[3].applyMatrix4(this.el.object3D.matrixWorld)},setContent(e,t){if(this.container){for(let e=0;e<this.container.children.length;e++){let t=this.container.children[e];this.container.yoga_node&&t.yoga_node&&this.container.yoga_node.removeChild(t.yoga_node),this.container.removeChild(t)}return new Promise(i=>{let s=document.createElement("a-entity");s.insertAdjacentHTML("afterbegin",e),s.addEventListener("loaded",e=>{t||this.updateContent(),i(s)}),this.container.appendChild(s)})}},updateContent(){this.container.object3D.position.y=this.data.height/2,this.setChildClips(),"undefined"!=typeof Yoga&&this.initialiseYoga(this.container,100*this.data.width),this.container.yoga_node.calculateLayout(100*this.data.width,"auto",Yoga.DIRECTION_LTR),this.content_height=Number.NEGATIVE_INFINITY,"undefined"!=typeof Yoga&&this.updateYoga(this.container),this.handleSize=THREE.Math.clamp(this.data.height/this.content_height,.1,1),this.handle.setAttribute("height",this.data.height*this.handleSize),this.handle.setAttribute("width",1===this.handleSize?1e-8:.1),this.rail.setAttribute("width",1===this.handleSize?1e-8:.1),this.rail.setAttribute("color",1===this.handleSize?"#efefef":"#fff"),this.handle.setAttribute("position",this.data.width/2+this.data.scrollPadding+" "+(this.data.height-this.data.height*this.handleSize)/2+" "+(this.data.scrollZOffset+5e-4))},mouseMove(e){if(this.isDragging){let t=this.rail.object3D.worldToLocal(e.detail.intersection.point);this.scroll(t.y-this.handlePos)}},scroll(e){let t=-this.data.height/2+this.data.height*this.handleSize/2,i=this.data.height/2-this.data.height*this.handleSize/2,s=THREE.Math.clamp(e,t,i),a=1-(s-t)/(i-t);this.container.object3D.position.y=(this.content_height-this.data.height)*a+this.data.height/2,this.handle.setAttribute("position",this.data.width/2+this.data.scrollPadding+" "+s+" "+(this.data.scrollZOffset+5e-4))},setupMouseWheelScroll(){this.backgroundPanel.addEventListener("ui-mousewheel",e=>{1!==this.handleSize&&(UI.utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),this.scroll(this.handle.getAttribute("position").y+-e.detail.evt.deltaY/800),UI.utils.stoppedChanging(this.el.object3D.uuid),UI.utils.preventDefault(e))})},setupElements(){this.backgroundPanel=document.createElement("a-plane"),this.backgroundPanel.setAttribute("class","background "+this.data.intersectableClass),this.backgroundPanel.setAttribute("width",this.data.width+1),this.backgroundPanel.setAttribute("height",this.data.height+1),this.backgroundPanel.setAttribute("position","0 0 -0.013"),this.backgroundPanel.setAttribute("opacity",1e-4),this.backgroundPanel.setAttribute("transparent",!0),this.el.appendChild(this.backgroundPanel),this.rail=document.createElement("a-plane"),this.rail.setAttribute("class","rail "+this.data.intersectableClass),this.rail.setAttribute("width",.1),this.rail.setAttribute("height",this.data.height),this.rail.setAttribute("shader","flat"),this.el.appendChild(this.rail),this.handle=document.createElement("a-plane"),this.handle.setAttribute("class","handle "+this.data.intersectableClass),this.handle.setAttribute("width",.1),this.handle.setAttribute("height",this.data.height),this.handle.setAttribute("color",this.data.scrollHandleColor),this.handle.setAttribute("shader","flat"),this.el.appendChild(this.handle)},setupYogaNode(e,t,i,s){s.hasOwnProperty("setWidth")||e.setWidth(t),s.hasOwnProperty("setHeight")||e.setHeight(i);for(let t in s)if(s.hasOwnProperty(t)&&-1===t.indexOf("Edge"))if(["setMarginLeft","setMarginPercentLeft","setPaddingLeft","setBorderLeft","setPositionLeft","setPositionPercentLeft"].indexOf(t)>-1)e[t](Yoga.EDGE_LEFT,s[t]);else if(["setMarginRight","setMarginPercentRight","setPaddingRight","setBorderRight","setPositionRight","setPositionPercentRight"].indexOf(t)>-1)e[t](Yoga.EDGE_RIGHT,s[t]);else if(["setMarginTop","setMarginPercentTop","setPaddingTop","setBorderTop","setPositionTop","setPositionPercentTop"].indexOf(t)>-1)e[t](Yoga.EDGE_TOP,s[t]);else if(["setMarginBottom","setMarginPercentBottom","setPaddingBottom","setBorderBottom","setPositionBottom","setPositionPercentBottom"].indexOf(t)>-1)e[t](Yoga.EDGE_BOTTOM,s[t]);else if(["setMargin","setMarginPercent","setPadding","setBorder","setPosition","setPositionPercent"].indexOf(t)>-1)e[t](Yoga.EDGE_ALL,s[t]);else if(t.indexOf("setMarginAuto")>-1){switch(t.replace("setMarginAuto","")){case"":e[t](Yoga.EDGE_ALL);break;case"Left":e[t](Yoga.EDGE_LEFT);break;case"Right":e[t](Yoga.EDGE_RIGHT);break;case"Top":e[t](Yoga.EDGE_TOP);break;case"Bottom":e[t](Yoga.EDGE_BOTTOM)}}else["setWidthAuto","setHeightAuto"].indexOf(t)>-1?e[t]():e[t](s[t])},initialiseYoga(e){let t=0,i=0;switch((e=e||this.container).tagName){case"A-TEXT":case"A-TRIANGLE":case"A-UI-TEXT-INPUT":case"A-UI-NUMBER-INPUT":case"A-UI-INT-INPUT":case"A-UI-PASSWORD-INPUT":t=e.getAttribute("width"),i=e.getAttribute("height");break;case"A-UI-BUTTON":case"A-PLANE":case"A-ENTITY":t=Number(e.components.geometry?e.components.geometry.data.width:e.getAttribute("width")),i=Number(e.components.geometry?e.components.geometry.data.height:e.getAttribute("height"));break;case"A-UI-FAB-BUTTON":case"A-UI-FAB-BUTTON-SMALL":case"A-CIRCLE":i=t=Number(e.components.geometry?2*e.components.geometry.data.radius:2*(e.getAttribute("radius")||0));break;case"A-RING":i=t=Number(e.components.geometry?2*e.components.geometry.data["radius-outer"]:2*(e.getAttribute("radius-outer")||0));break;case"A-UI-SWITCH":case"A-UI-CHECKBOX":case"A-UI-RADIO":let s=e.tagName.substr(2).toLowerCase();t=e.components[s].width,i=e.components[s].height}e.yoga_node||(e.yoga_node=Yoga.Node.create(),e.components["ui-yoga"]?this.setupYogaNode(e.yoga_node,t?100*t:"auto",i?100*i:"auto",e.components["ui-yoga"].getProperties()):(e.yoga_node.setWidth(t?100*t:"auto"),e.yoga_node.setHeight(i?100*i:"auto"),e.yoga_node.setJustifyContent(Yoga.JUSTIFY_FLEX_START),e.yoga_node.setFlexDirection(Yoga.FLEX_DIRECTION_ROW),e.yoga_node.setAlignContent(Yoga.ALIGN_AUTO),e.yoga_node.setFlexWrap(Yoga.WRAP_WRAP)),e.parentElement&&e.parentElement.yoga_node?(e.components["ui-yoga"]||(e.yoga_node.setMargin(Yoga.EDGE_RIGHT,5),e.yoga_node.setMargin(Yoga.EDGE_BOTTOM,5)),e.parentElement.yoga_node.insertChild(e.yoga_node,e.parentElement.yoga_node.getChildCount())):e.components["ui-yoga"]||e.yoga_node.setPadding(Yoga.EDGE_ALL,2)),[].slice.call(e.children).forEach(e=>{e.classList.contains("no-yoga-layout")||this.initialiseYoga(e)})},updateYoga(e){[].slice.call(e.children).forEach(e=>{if(e.classList.contains("no-yoga-layout"))return;let t;t="A-ENTITY"===e.tagName?{x:e.yoga_node.getComputedLeft()/100,y:e.yoga_node.getComputedTop()/100}:{x:e.yoga_node.getComputedLeft()/100+e.yoga_node.getComputedWidth()/200,y:e.yoga_node.getComputedTop()/100+e.yoga_node.getComputedHeight()/200};let i=e.yoga_node.getComputedTop()/100+e.yoga_node.getComputedHeight()/100;i>this.content_height&&(this.content_height=i),e.setAttribute("position",t.x+" "+-t.y+" "+e.getAttribute("position").z),this.updateYoga(e)})},setChildClips(e){e=e||this.container,[].slice.call(e.children).forEach(e=>{e._content_clips=this.content_clips;let t=()=>{e.object3D.traverse(e=>{e.material&&(e.material.isRawShaderMaterial&&(e.material.onBeforeCompile=function(e){let t=e.vertexShader.split("\n"),i=t.indexOf("void main(void) {");t.splice(i,0,"#include <clipping_planes_pars_vertex>"),t.splice(i+2,0,"#include <begin_vertex>"),t.splice(t.length-2,0,"#include <project_vertex>"),t.splice(t.length-2,0,"#include <clipping_planes_vertex>"),e.vertexShader=t.join("\n");let s=e.fragmentShader.split("\n"),a=s.indexOf("void main() {");s.splice(a,0,"#include <clipping_planes_pars_fragment>"),s.splice(a+2,0,"#include <clipping_planes_fragment>"),e.fragmentShader=s.join("\n")},e.material.clipping=!0),e.material.clippingPlanes=this.content_clips,e.material.clipShadows=!0,e.material.needsUpdate=!0)})};e.components.text?e.addEventListener("textfontset",()=>{UI.utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),t(),setTimeout(()=>UI.utils.stoppedChanging(this.el.object3D.uuid),200)}):t(),this.setChildClips(e)})}})},function(e,t){e.exports=AFRAME.registerComponent("ui-checkbox",{schema:{value:{type:"boolean",default:!1},selectedColor:{default:"#009688"},unselectedColor:{default:"#7f7f7f"},disabledColor:{default:"#afafaf"},indeterminate:{type:"boolean",default:!1},disabled:{type:"boolean",default:!1},intersectableClass:{default:"intersectable"}},init(){this.width=.15,this.height=.15,this.container=document.createElement("a-entity"),this.container.setAttribute("class","no-yoga-layout"),this.el.appendChild(this.container),this.setupLines();let e=document.createElement("a-plane");e.setAttribute("width",.105),e.setAttribute("height",.105),e.setAttribute("position","0 0 -0.002"),e.setAttribute("shader","flat"),e.setAttribute("class",this.data.intersectableClass+" no-yoga-layout"),e.setAttribute("opacity",1e-4),e.setAttribute("transparent",!0),this.el.appendChild(e),this.clickHandler=(()=>{this.data.value=!this.data.value,this.click()}),this.setSelected(),this.setDisabled(),this.setTransform(1)},updateSchema(){this.data&&(this.setDisabled(),this.data.disabled?this.data.value&&(this.data.value=!1,this.data.indeterminate=!1,this.click()):this.click())},setTransform(e){this.data.value?(this.container.setAttribute("rotation",{x:0,y:0,z:-45*e}),this.container.setAttribute("position",{x:-.025*e,y:.05*e,z:0})):(this.container.setAttribute("rotation",{x:0,y:0,z:45*e-45}),this.container.setAttribute("position",{x:.025-.025*e,y:.05-.05*e,z:0}))},click(){this.data.indeterminate=!1,this.setSelected(),this.animateSelected()},animateSelected(){let e=this;UI.utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),new TWEEN.Tween({x:0}).to({x:1},200).onUpdate(function(){e.setTransform(this.x)}).onComplete(function(){UI.utils.stoppedChanging(e.el.object3D.uuid)}).easing(TWEEN.Easing.Exponential.Out).start()},setSelected(){this.data.value?(this.topLine.setAttribute("scale","0.000001 0.000001 0.000001"),this.leftLine.setAttribute("scale","0.000001 0.000001 0.000001"),this.bottomLine.setAttribute("scale","1 1 1"),this.rightLine.setAttribute("scale","1 1 1"),this.bottomLine.setAttribute("position","0.025 -0.05 0"),this.rightLine.setAttribute("position","0.05 0 0"),this.bottomLine.setAttribute("rotation","0 0 90"),this.bottomLine.setAttribute("height",.05),this.bottomLine.setAttribute("color",this.data.selectedColor),this.rightLine.setAttribute("color",this.data.selectedColor)):this.data.indeterminate?(this.topLine.setAttribute("scale","0.000001 0.000001 0.000001"),this.leftLine.setAttribute("scale","0.000001 0.000001 0.000001"),this.bottomLine.setAttribute("scale","1 1 1"),this.rightLine.setAttribute("scale","0.000001 0.000001 0.000001"),this.bottomLine.setAttribute("position","0 0 0"),this.bottomLine.setAttribute("rotation","0 0 90"),this.bottomLine.setAttribute("height",.1),this.bottomLine.setAttribute("color",this.data.unselectedColor),this.rightLine.setAttribute("color",this.data.unselectedColor)):(this.topLine.setAttribute("scale","1 1 1"),this.leftLine.setAttribute("scale","1 1 1"),this.bottomLine.setAttribute("scale","1 1 1"),this.rightLine.setAttribute("scale","1 1 1"),this.bottomLine.setAttribute("height",.1),this.leftLine.setAttribute("position","-0.05 0 0"),this.rightLine.setAttribute("position","0.05 0 0"),this.topLine.setAttribute("position","0 0.05 0"),this.bottomLine.setAttribute("position","0 -0.05 0"),this.topLine.setAttribute("rotation","0 0 90"),this.bottomLine.setAttribute("rotation","0 0 90"),this.bottomLine.setAttribute("color",this.data.unselectedColor),this.rightLine.setAttribute("color",this.data.unselectedColor))},setupLines(){this.leftLine=this.line(!0),this.rightLine=this.line(!0),this.topLine=this.line(!0),this.bottomLine=this.line(!0),this.container.appendChild(this.topLine),this.container.appendChild(this.leftLine),this.container.appendChild(this.bottomLine),this.container.appendChild(this.rightLine)},setDisabled(){this.data.disabled?(this.el.removeEventListener("mousedown",this.clickHandler),this.topLine.setAttribute("color",this.data.disabledColor),this.leftLine.setAttribute("color",this.data.disabledColor),this.rightLine.setAttribute("color",this.data.disabledColor),this.bottomLine.setAttribute("color",this.data.disabledColor)):(this.el.addEventListener("mousedown",this.clickHandler),this.topLine.setAttribute("color",this.data.unselectedColor),this.leftLine.setAttribute("color",this.data.unselectedColor),this.rightLine.setAttribute("color",this.data.value?this.data.selectedColor:this.data.unselectedColor),this.bottomLine.setAttribute("color",this.data.value?this.data.selectedColor:this.data.unselectedColor))},line(e){let t=document.createElement("a-plane");return t.setAttribute("width",e?.01:.105),t.setAttribute("height",e?.105:.01),t.setAttribute("class","no-yoga-layout"),t.setAttribute("shader","flat"),t}})},function(e,t){e.exports=AFRAME.registerComponent("ui-radio",{schema:{value:{default:""},selected:{type:"boolean",default:!1},selectedColor:{default:"#009688"},selectedRadius:{type:"number",default:.045},unselectedColor:{default:"#5f5f5f"},disabledColor:{default:"#afafaf"},disabled:{type:"boolean",default:!1},intersectableClass:{default:"intersectable"}},init(){this.width=this.data.size||.15,this.height=this.data.size||.15,this.filled_circle=document.createElement("a-circle"),this.filled_circle.setAttribute("radius",this.data.selectedRadius),this.filled_circle.setAttribute("scale","0 0 0"),this.filled_circle.setAttribute("color",this.data.disabled?this.data.disabledColor:this.data.selectedColor),this.filled_circle.setAttribute("shader","flat"),this.filled_circle.setAttribute("class","no-yoga-layout"),this.filled_circle.setAttribute("segments",6),this.el.components.material.material.color=new THREE.Color(this.data.disabled?this.data.disabledColor:this.data.unselectedColor),this.el.appendChild(this.filled_circle);let e=document.createElement("a-circle");e.setAttribute("radius",this.data.selectedRadius),e.setAttribute("position","0 0 -0.002"),e.setAttribute("class",this.data.intersectableClass+" no-yoga-layout"),e.setAttribute("shader","flat"),e.setAttribute("segments",6),e.setAttribute("opacity",1e-4),e.setAttribute("transparent",!0),this.el.appendChild(e),this.data.selected&&this.click(),this.data.disabled||this.el.addEventListener("mousedown",e=>this.click(e))},deselect(){this.el.setAttribute("selected",!1);let e=this;UI.utils.isChanging(this.el.sceneEl,this.filled_circle.object3D.uuid),new TWEEN.Tween({x:1}).to({x:1e-6},200).onUpdate(function(){e.filled_circle.object3D.scale.set(this.x,this.x,this.x)}).onComplete(()=>{UI.utils.stoppedChanging(e.filled_circle.object3D.uuid),this.isRippling=!1}).easing(TWEEN.Easing.Exponential.Out).start()},click(){if([].slice.call(this.el.parentNode.querySelectorAll("a-ring,a-ui-radio")).filter(e=>e!==this.el).forEach(e=>{e.components["ui-radio"]&&"true"===e.getAttribute("selected")&&e.components["ui-radio"].deselect()}),this.el.setAttribute("selected",!0),this.isSelecting)return;this.isSelecting=!0;let e=this;UI.utils.isChanging(this.el.sceneEl,this.filled_circle.object3D.uuid),new TWEEN.Tween({x:1e-6}).to({x:1},250).onUpdate(function(){e.filled_circle.object3D.scale.set(this.x,this.x,this.x)}).onComplete(()=>{UI.utils.stoppedChanging(this.filled_circle.object3D.uuid),this.isSelecting=!1}).easing(TWEEN.Easing.Exponential.Out).start()}})},function(e,t){e.exports=AFRAME.registerComponent("ui-curved-plane",{schema:{depth:{type:"number",default:.03}},init(){let e=this.el.getObject3D("mesh"),t=this.el.getAttribute("width"),i=this.el.getAttribute("height"),s=new THREE.PlaneGeometry(t,i,5,1),a=new THREE.CubicBezierCurve3(s.vertices[0],new THREE.Vector3(.375*t,0,-this.data.depth*t),new THREE.Vector3(.625*t,0,-this.data.depth*t),s.vertices[s.vertices.length/2-1]).getPoints(Math.abs(s.vertices.length/2)-1);for(let e=1;e<3;e++)for(let t=0;t<a.length;t++)s.vertices[2===e?a.length+t:t].z=a[t].z;e.geometry=s}})},function(e,t){e.exports=AFRAME.registerComponent("ui-renderer",{schema:{uiPanel:{type:"selector"},lookControlsEl:{type:"selector"},lookControlsComponent:{default:"look-controls"},panelPosition:{type:"vec3",default:{x:0,y:1.6,z:-1}},panelSize:{type:"vec2",default:{x:6,y:3}},renderResolution:{type:"vec2",default:{x:2048,y:1024}},debugRaycaster:{type:"boolean",default:!1},fps:{type:"number",default:45},intersectableClass:{default:"intersectable"}},init(){this.setupBackDrop(),this.data.uiPanel?this.meshEl=this.data.uiPanel:this.meshEl=this.setupUIPanel(),this.el.object3D.parent.remove(this.el.object3D),this.camera=new THREE.PerspectiveCamera(100,2,.1,1e3),this.renderTarget=new THREE.WebGLRenderTarget(this.data.renderResolution.x,this.data.renderResolution.y,{antialias:!0}),this.meshEl.getObject3D("mesh").material.map=this.renderTarget.texture,this.isRendering=!0,this.stoppedRendering=!1,this.el.sceneEl.addEventListener("ui-changing",()=>{this.stoppedRendering=!1,this.isRendering=!0}),this.el.sceneEl.addEventListener("ui-changing-stopped",()=>{this.isRendering=!1}),this.raycaster=new THREE.Raycaster,this.helper=new THREE.Mesh(new THREE.SphereGeometry(.01),new THREE.MeshBasicMaterial({color:"#ff0000"})),this.data.debugRaycaster&&this.el.object3D.add(this.helper),this.lastRenderTime=0,this.isFrozen=!1},pauseRender(){return this.playRender(!0)},playRender(e){let t=this;return new Promise(i=>{if(t.isFrozen===e||t.isAnimatingBackground)return i();t.isAnimatingBackground=!0,t.isFrozen||this.backdrop.setAttribute("scale","1 1 1");let s=t.isFrozen?.9:1e-6,a=t.isFrozen?1e-6:.9,n=t.isFrozen?350:500;t.isFrozen&&(t.isFrozen=e,t.play()),UI.utils.isChanging(t.el.sceneEl,t.backdrop.uuid),new TWEEN.Tween({x:s}).to({x:a},n).onUpdate(function(){t.backdrop.setAttribute("opacity",this.x)}).onComplete(()=>{t.isFrozen=e,t.isAnimatingBackground=!1,UI.utils.stoppedChanging(this.backdrop.uuid),t.isFrozen?t.pause():this.backdrop.setAttribute("scale","0.000001 0.000001 0.000001"),i()}).easing(TWEEN.Easing.Exponential.Out).start()})},setupBackDrop(){this.backdrop=document.createElement("a-plane"),this.backdrop.setAttribute("transparent",!0),this.backdrop.setAttribute("opacity",1e-6),this.backdrop.setAttribute("color","#000"),this.backdrop.setAttribute("shader","flat"),this.backdrop.setAttribute("position",{x:0,y:0,z:-.2}),this.backdrop.setAttribute("width",1),this.backdrop.setAttribute("height",1),this.backdrop.setAttribute("scale","0.000001 0.000001 0.000001"),this.el.appendChild(this.backdrop)},play(){this.lastMouseMoveTime=0,this.click=(e=>this.mouseEvent("click",this.lastMoveEvent||e)),this.mousedown=(e=>this.mouseEvent("mousedown",this.lastMoveEvent||e)),this.mouseup=(e=>this.mouseEvent("mouseup",this.lastMoveEvent||e)),this.mousewheel=(e=>this.mouseEvent("ui-mousewheel",e.detail.evt)),this.mousemove=(e=>{this.lastMoveEvent=e,this.mouseEvent("ui-mousemove",e)}),this.meshEl.addEventListener("mousedown",this.mousedown),this.meshEl.addEventListener("mouseup",this.mouseup),this.meshEl.addEventListener("click",this.click),this.meshEl.addEventListener("ui-mousemove",this.mousemove),this.meshEl.addEventListener("ui-mousewheel",this.mousewheel)},pause(){this.meshEl.removeEventListener("mousedown",this.mousedown),this.meshEl.removeEventListener("mouseup",this.mouseup),this.meshEl.removeEventListener("click",this.click),this.meshEl.removeEventListener("ui-mousemove",this.mousemove),this.meshEl.removeEventListener("ui-mousewheel",this.mousewheel)},setupUIPanel(){let e=document.createElement("a-plane");return e.setAttribute("position",this.data.panelPosition),e.setAttribute("width",this.data.panelSize.x),e.setAttribute("height",this.data.panelSize.y),this.el.sceneEl.appendChild(e),e},mouseEvent(e,t){let i={x:0,y:0};if(t.detail.intersection){let e=this.el.object3D.worldToLocal(t.detail.intersection.point);i={x:e.x/this.meshEl.getAttribute("width")*2,y:e.y/this.meshEl.getAttribute("height")*2}}"ui-mousewheel"===e&&t.detail.evt&&(i.deltaY=t.detail.deltaY,i.deltaX=t.detail.deltaX),"mousedown"===e&&this.lookControlsEl&&this.lookControlsEl.components["look-controls"]&&this.lookControlsEl.components[this.data.lookControlsComponent].pause(),"mouseup"===e&&this.lookControlsEl&&this.lookControlsEl.components["look-controls"]&&this.lookControlsEl.components[this.data.lookControlsComponent].play(),this.raycastIntersections(t,i,e)},raycastIntersections(e,t,i){if(!this.camera)return;this.raycaster.setFromCamera(t,this.camera);let s=this.raycaster.intersectObjects(this.el.object3D.children,!0);this.prevIntersectionEls=this.prevIntersectionEls||[];let a=[];if(s.length&&this.data.debugRaycaster){let e=s[0].point;s[0].object===this.helper&&s.length>1&&(e=s[1].point),this.helper.position.copy(e),this.helper.position.x-=.03}let n=!1;for(let t=0;t<s.length;t++){let o=s[t];if(o.object.el&&o.object.el.classList.contains(this.data.intersectableClass)){let t={intersection:o,evt:e,preventDefault:()=>{n=!0}};-1!==this.prevIntersectionEls.indexOf(o.object.el)||n||o.object.el.emit("mouseenter",t),n||o.object.el.emit(i,t),o.object.el.intersection=o,a.push(o.object.el)}}for(let e=0;e<this.prevIntersectionEls.length;e++){let t=this.prevIntersectionEls[e];-1===a.indexOf(t)&&t.emit("mouseleave",{intersection:t.intersection})}this.prevIntersectionEls=a},tick(){this.isFrozen||(new Date).getTime()-this.lastRenderTime<1e3/this.data.fps&&this.isRendering||this.stoppedRendering||(this.el.object3D.traverse(e=>{e.updateMatrixWorld()}),this.el.sceneEl.renderer.render(this.el.object3D,this.camera,this.renderTarget),this.lastRenderTime=(new Date).getTime(),this.isRendering||(this.stoppedRendering=!0))}})},function(e,t){if("undefined"==typeof Yoga)throw"ui-yoga component requires the Yoga Layout Engine to be loaded - https://yogalayout.com";e.exports=AFRAME.registerComponent("ui-yoga",{schema:{alignContent:{default:"flex-start"},alignItems:{default:"auto"},alignSelf:{default:"auto"},display:{default:"default"},flex:{type:"number",default:1},flexDirection:{default:"row"},flexWrap:{default:"default"},aspectRatio:{default:"default"},overflow:{default:"default"},justifyContent:{default:"start"},border:{type:"int",default:0},borderLeft:{type:"int",default:0},borderRight:{type:"int",default:0},borderTop:{type:"int",default:0},borderBottom:{type:"int",default:0},padding:{type:"int",default:0},paddingLeft:{type:"int",default:0},paddingRight:{type:"int",default:0},paddingTop:{type:"int",default:0},paddingBottom:{type:"int",default:0},margin:{type:"int",default:0},marginLeft:{type:"int",default:0},marginRight:{type:"int",default:0},marginTop:{type:"int",default:0},marginBottom:{type:"int",default:0},marginAuto:{type:"boolean",default:!1},marginAutoLeft:{type:"boolean",default:!1},marginAutoRight:{type:"boolean",default:!1},marginAutoTop:{type:"boolean",default:!1},marginAutoBottom:{type:"boolean",default:!1},marginPercent:{type:"number",default:0},marginPercentLeft:{type:"int",default:0},marginPercentRight:{type:"int",default:0},marginPercentTop:{type:"int",default:0},marginPercentBottom:{type:"int",default:0},flexBasis:{default:"default"},flexBasisPercent:{type:"number",default:0},flexGrow:{type:"number",default:0},flexShrink:{type:"number",default:1},maxHeight:{default:"default"},minHeight:{default:"default"},maxWidth:{default:"default"},minWidth:{default:"default"},maxHeightPercent:{default:"default"},minHeightPercent:{default:"default"},maxWidthPercent:{default:"default"},minWidthPercent:{default:"default"},position:{default:"default"},positionLeft:{type:"int",default:0},positionRight:{type:"int",default:0},positionTop:{type:"int",default:0},positionBottom:{type:"int",default:0},positionPercent:{default:"default"},positionPercentLeft:{type:"int",default:0},positionPercentRight:{type:"int",default:0},positionPercentTop:{type:"int",default:0},positionPercentBottom:{type:"int",default:0},width:{default:"default"},height:{default:"default"},widthAuto:{type:"boolean",default:!1},heightAuto:{type:"boolean",default:!1},widthPercent:{default:"default"},heightPercent:{default:"default"}},init(){this.setProperties()},updateSchema(){this.setProperties()},setProperties(){this.properties=this.properties||[],this.properties.length=0;for(let e in this.data)if(this.data.hasOwnProperty(e)&&"default"!==this.data[e]&&this.data[e]){this.mapPropertyToEnum(e)&&this.properties.push({method:"set"+e.charAt(0).toUpperCase()+e.substr(1),value:this.mapPropertyToEnum(e)})}},getProperties(){let e={};for(let t=0;t<this.properties.length;t++)e[this.properties[t].method]=this.properties[t];return e},mapPropertyToEnum(e){switch(!0){case e.indexOf("align")>-1:return this.enums.align[this.data[e]];case e.indexOf("Edge")>-1:return this.enums.edge[this.data[e]];case"flexDirection"===e:case"flexWrap"===e:case"positionType"===e:case"overflow"===e:case"display"===e:case"justifyContent"===e:return this.enums[e][this.data[e]];default:return this.data[e]}},enums:{align:{count:Yoga.ALIGN_COUNT,auto:Yoga.ALIGN_AUTO,"flex-start":Yoga.ALIGN_FLEX_START,center:Yoga.ALIGN_CENTER,"flex-end":Yoga.ALIGN_FLEX_END,stretch:Yoga.ALIGN_STRETCH,baseline:Yoga.ALIGN_BASELINE,"space-between":Yoga.ALIGN_SPACE_BETWEEN,"space-around":Yoga.ALIGN_SPACE_AROUND},dimension:{count:Yoga.DIMENSION_COUNT,width:Yoga.DIMENSION_WIDTH,height:Yoga.DIMENSION_HEIGHT},direction:{count:Yoga.DIRECTION_COUNT,inherit:Yoga.DIRECTION_INHERIT,ltr:Yoga.DIRECTION_LTR,rtl:Yoga.DIRECTION_RTL},display:{count:Yoga.DISPLAY_COUNT,flex:Yoga.DISPLAY_FLEX,none:Yoga.DISPLAY_NONE},edge:{count:Yoga.EDGE_COUNT,left:Yoga.EDGE_LEFT,top:Yoga.EDGE_TOP,right:Yoga.EDGE_RIGHT,bottom:Yoga.EDGE_BOTTOM,start:Yoga.EDGE_START,end:Yoga.EDGE_END,horizontal:Yoga.EDGE_HORIZONTAL,vertical:Yoga.EDGE_VERTICAL,all:Yoga.EDGE_ALL},experimental:{count:Yoga.EXPERIMENTAL_FEATURE_COUNT,"flex-basis":Yoga.EXPERIMENTAL_FEATURE_WEB_FLEX_BASIS},flexDirection:{count:Yoga.FLEX_DIRECTION_COUNT,column:Yoga.FLEX_DIRECTION_COLUMN,"column-reverse":Yoga.FLEX_DIRECTION_COLUMN_REVERSE,row:Yoga.FLEX_DIRECTION_ROW,reverse:Yoga.FLEX_DIRECTION_ROW_REVERSE},justifyContent:{count:Yoga.JUSTIFY_COUNT,start:Yoga.JUSTIFY_FLEX_START,center:Yoga.JUSTIFY_CENTER,end:Yoga.JUSTIFY_FLEX_END,between:Yoga.JUSTIFY_SPACE_BETWEEN,around:Yoga.JUSTIFY_SPACE_AROUND,evenly:Yoga.JUSTIFY_SPACE_EVENLY},logLevel:{count:Yoga.LOG_LEVEL_COUNT,error:Yoga.LOG_LEVEL_ERROR,warn:Yoga.LOG_LEVEL_WARN,info:Yoga.LOG_LEVEL_INFO,debug:Yoga.LOG_LEVEL_DEBUG,verbose:Yoga.LOG_LEVEL_VERBOSE,fatal:Yoga.LOG_LEVEL_FATAL},measureMode:{count:Yoga.MEASURE_MODE_COUNT,undefined:Yoga.MEASURE_MODE_UNDEFINED,exactly:Yoga.MEASURE_MODE_EXACTLY,"at-most":Yoga.MEASURE_MODE_AT_MOST},nodeType:{count:Yoga.NODE_TYPE_COUNT,default:Yoga.NODE_TYPE_DEFAULT,text:Yoga.NODE_TYPE_TEXT},overflow:{count:Yoga.OVERFLOW_COUNT,visible:Yoga.OVERFLOW_VISIBLE,hidden:Yoga.OVERFLOW_HIDDEN,scroll:Yoga.OVERFLOW_SCROLL},positionType:{count:Yoga.POSITION_TYPE_COUNT,relative:Yoga.POSITION_TYPE_RELATIVE,absolute:Yoga.POSITION_TYPE_ABSOLUTE},printOptions:{count:Yoga.PRINT_OPTIONS_COUNT,layout:Yoga.PRINT_OPTIONS_LAYOUT,style:Yoga.PRINT_OPTIONS_STYLE,children:Yoga.PRINT_OPTIONS_CHILDREN},unit:{count:Yoga.UNIT_COUNT,undefined:Yoga.UNIT_UNDEFINED,point:Yoga.UNIT_POINT,percent:Yoga.UNIT_PERCENT,auto:Yoga.UNIT_AUTO},flexWrap:{count:Yoga.WRAP_COUNT,"no-wrap":Yoga.WRAP_NO_WRAP,wrap:Yoga.WRAP_WRAP,"wrap-reverse":Yoga.WRAP_WRAP_REVERSE}}})},function(e){e.exports={name:"aframe-material-collection",version:"0.3.1",description:"Material UI based primitives and components for use in your aframe projects.",homepage:"https://github.com/shaneharris/aframe-material-collection",keywords:["AFRAME","UI","Material"],scripts:{start:"webpack-dev-server --mode development",build:"webpack --mode production"},repository:{type:"git",url:"git@github.com:shaneharris/aframe-material-collection.git"},bugs:{url:"https://github.com/shaneharris/aframe-material-collection/issues"},devDependencies:{"uglifyjs-webpack-plugin":"^1.2.7",webpack:"^4.16.1","webpack-cli":"^3.1.0","webpack-dev-server":"^3.1.4"},author:"Shane Harris",license:"MIT",dependencies:{}}},function(e,t){e.exports=AFRAME.registerComponent("ui-icon",{schema:{src:{default:"icons/send_white_64dp.png"},size:{type:"vec2",default:{x:.1,y:.1}},zIndex:{type:"number",default:.003},color:{default:"#fff"}},init(){this.icon=new THREE.Mesh(new THREE.PlaneGeometry(this.data.size.x,this.data.size.y),new THREE.MeshBasicMaterial({color:this.data.color,alphaTest:.4,transparent:!0,map:(new THREE.TextureLoader).load(this.data.src)})),this.icon.position.set(0,0,this.data.zIndex),this.el.object3D.add(this.icon)}})},function(e,t){e.exports=AFRAME.registerComponent("ui-rounded",{schema:{borderRadius:{type:"number",default:.01},curveSegments:{type:"int",default:1}},init(){let e=this.el.getObject3D("mesh"),t=new THREE.Shape;!function(e,t,i,s,a,n){e.moveTo(t,i+n),e.lineTo(t,i+a-n),e.quadraticCurveTo(t,i+a,t+n,i+a),e.lineTo(t+s-n,i+a),e.quadraticCurveTo(t+s,i+a,t+s,i+a-n),e.lineTo(t+s,i+n),e.quadraticCurveTo(t+s,i,t+s-n,i),e.lineTo(t+n,i),e.quadraticCurveTo(t,i,t,i+n)}(t,-e.geometry.metadata.parameters.width/2,-e.geometry.metadata.parameters.height/2,e.geometry.metadata.parameters.width,e.geometry.metadata.parameters.height,this.data.borderRadius),e.geometry=new THREE.ShapeGeometry(t,this.data.curveSegments),this.el.emit("rounded-loaded",null,!1)}})},function(e,t){e.exports=AFRAME.registerComponent("ui-ripple",{schema:{color:{default:"#fff"},duration:{type:"int",default:1e3},fadeDuration:{type:"int",default:750},fadeDelay:{type:"int",default:250},clampToSquare:{type:"boolean",default:!1},size:{type:"vec2",default:{x:1,y:1}},zIndex:{type:"number",default:-.001},segments:{type:"int",default:6}},init(){this.rippleGeometry=new THREE.CircleGeometry(Math.max(this.data.size.x,this.data.size.y),this.data.segments),this.ripple=new THREE.Mesh(this.rippleGeometry.clone(),new THREE.MeshBasicMaterial({color:this.data.color,transparent:!0,opacity:.4,alphaTest:.1})),this.ripple.scale.set(1e-5,1e-5,1e-5),this.el.object3D.add(this.ripple),this.el.addEventListener("mousedown",this.click.bind(this)),this.ripple.position.set(0,0,this.data.zIndex),this.data.clampToSquare&&(this.content_clips=[new THREE.Plane(new THREE.Vector3(0,1,0),this.data.size.y/2),new THREE.Plane(new THREE.Vector3(0,-1,0),this.data.size.y/2),new THREE.Plane(new THREE.Vector3(-1,0,0),this.data.size.x/2),new THREE.Plane(new THREE.Vector3(1,0,0),this.data.size.x/2)])},click(e){if(this.isRippling)return e.preventDefault();this.isRippling=!0,this.data.clampToSquare&&this.setRippleClips(this.ripple.material),this.tweenSize(this.ripple.geometry),this.tweenOpacity(this.ripple.material)},setRippleClips(){this.content_clips[0].set(new THREE.Vector3(0,1,0),this.data.size.y/2),this.content_clips[1].set(new THREE.Vector3(0,-1,0),this.data.size.y/2),this.content_clips[2].set(new THREE.Vector3(-1,0,0),this.data.size.x/2),this.content_clips[3].set(new THREE.Vector3(1,0,0),this.data.size.x/2),this.content_clips[0].applyMatrix4(this.el.object3D.matrixWorld),this.content_clips[1].applyMatrix4(this.el.object3D.matrixWorld),this.content_clips[2].applyMatrix4(this.el.object3D.matrixWorld),this.content_clips[3].applyMatrix4(this.el.object3D.matrixWorld),this.ripple.material.clippingPlanes=this.el._content_clips?this.el._content_clips.concat(this.content_clips):this.content_clips,this.ripple.material.clipShadows=!0,this.ripple.material.needsUpdate=!0},tweenSize(e){let t=this;UI.utils.isChanging(this.el.sceneEl,t.ripple.uuid),new TWEEN.Tween({x:1e-5}).to({x:1},this.data.duration).onUpdate(function(){t.ripple.scale.set(this.x,this.x,this.x)}).onComplete(()=>{t.ripple.scale.set(1e-5,1e-5,1e-5),this.isRippling=!1,UI.utils.stoppedChanging(t.ripple.uuid)}).easing(TWEEN.Easing.Exponential.Out).start()},tweenOpacity(e){new TWEEN.Tween({x:.4}).to({x:0},this.data.fadeDuration).delay(this.data.fadeDelay).onUpdate(function(){e.opacity=this.x}).onComplete(()=>{e.opacity=.4}).easing(TWEEN.Easing.Exponential.Out).start()}})},function(e,t){e.exports=AFRAME.registerComponent("ui-mouse-shim",{schema:{fps:{type:"number",default:60}},init(){if(!this.el.components.raycaster)throw"ui-mouse-move component needs the raycaster component to be added.";this.el.sceneEl.renderer.domElement.addEventListener("mousewheel",this.onMouseWheel.bind(this),!1)},onMouseWheel(e){this.emitMouseEvent("ui-mousewheel",e)},tick(){(new Date).getTime()-this.lastMouseMoveTime<1e3/this.data.fps||(this.emitMouseEvent("ui-mousemove"),this.lastMouseMoveTime=(new Date).getTime())},emitMouseEvent(e,t){this.el.components.raycaster.intersections.forEach(i=>{i.object.el&&i.object.el.emit(e,{cursorEl:this.el,intersection:i,evt:t})})}})},function(e,t){e.exports=AFRAME.registerComponent("ui-double-click",{schema:{timeout:{type:"int",default:200}},init(){let e=0;this.el.addEventListener("mousedown",t=>{let i=(new Date).getTime();i-e<this.data.timeout&&(this.el.emit("dblclick",t),e=0,t.preventDefault()),e=i})}})},function(e,t){e.exports=AFRAME.registerComponent("ui-border",{schema:{borderRadius:{type:"number",default:.01},curveSegments:{type:"int",default:1},borderWidth:{type:"number",default:.015},color:{default:"#8f8f8f"},numberOfPoints:{type:"int",default:180}},init(){let e=this.el.getObject3D("mesh"),t=new THREE.Shape;!function(e,t,i,s,a,n){e.moveTo(t,i+n),e.lineTo(t,i+a-n),e.quadraticCurveTo(t,i+a,t+n,i+a),e.lineTo(t+s-n,i+a),e.quadraticCurveTo(t+s,i+a,t+s,i+a-n),e.lineTo(t+s,i+n),e.quadraticCurveTo(t+s,i,t+s-n,i),e.lineTo(t+n,i),e.quadraticCurveTo(t,i,t,i+n)}(t,-e.geometry.metadata.parameters.width/2,-e.geometry.metadata.parameters.height/2,e.geometry.metadata.parameters.width,e.geometry.metadata.parameters.height,this.data.borderRadius);let i=t.getSpacedPoints(this.data.numberOfPoints),s=(new THREE.BufferGeometry).setFromPoints(i);this.el.setObject3D("mesh",new THREE.Points(s,new THREE.PointsMaterial({color:this.data.color,size:this.data.borderWidth})))}})},function(e,t){e.exports=AFRAME.registerComponent("ui-modal",{schema:{modal:{type:"selector"},main:{type:"selector"}},init(){if(this.data.modal&&this.data.main){this.modalPanel=document.querySelector(this.data.modal.getAttribute("ui-panel"));let e=this.data.main.components,t=this.data.modal.components;t&&t["ui-renderer"]&&t["ui-renderer"].pause();let i=this.data.modal.querySelectorAll(".close-modal");for(let s=0;s<i.length;s++){i[s].addEventListener("mousedown",()=>{t["ui-renderer"].pause(),e["ui-renderer"].playRender(),this.tweenModalScale(1,1e-7)})}this.el.addEventListener("mousedown",()=>{e&&e["ui-renderer"]&&(e["ui-renderer"].pauseRender(),this.tweenModalScale(1e-7,1),t["ui-renderer"].play())})}},tweenModalScale(e,t){return new Promise(i=>{let s=this;new TWEEN.Tween({x:e}).to({x:t},250).onUpdate(function(){s.modalPanel&&s.modalPanel.setAttribute("scale",this.x+" "+this.x+" "+this.x)}).onComplete(i).easing(TWEEN.Easing.Exponential.Out).start()})}})},function(e,t,i){"use strict";i.r(t);let s=i(21).version;if(console.log("aframe-material-collection version "+s),"undefined"==typeof AFRAME)throw'aframe-material-collection requires AFRAME to be loaded first. - <script src="https://aframe.io/releases/0.8.2/aframe.min.js"><\/script>';let a=new class{constructor(){this.changesDetected={},this.is_changeing=!1}isFirstOrLastChange(){let e=!0;for(let t in this.changesDetected){this.is_changeing||this.scene.emit("ui-changing"),e=!1,this.is_changeing=!0;break}if(e){if(this.is_changeing){let e=this.scene.object3D.onAfterRender;this.scene.object3D.onAfterRender=(()=>{this.scene.emit("ui-changing-stopped"),this.scene.object3D.onAfterRender=e})}this.is_changeing=!1}}preventDefault(e){e.detail.preventDefault&&"function"==typeof e.detail.preventDefault&&e.detail.preventDefault()}isChanging(e,t){this.scene=this.scene||e,this.changesDetected[t]=0,this.isFirstOrLastChange()}stoppedChanging(e){e in this.changesDetected&&delete this.changesDetected[e],this.isFirstOrLastChange()}};window.UI={utils:a,a_ui_button:i(0),a_ui_fab_button:i(1),a_ui_fab_button_small:i(2),a_ui_switch:i(3),a_ui_checkbox:i(4),a_ui_radio:i(5),a_ui_text_input:i(6),a_ui_number_input:i(7),a_ui_int_input:i(8),a_ui_password_input:i(9),a_ui_scroll_pane:i(10),a_ui_renderer:i(11),text:i(12),btn:i(13),icon:i(22),rounded:i(23),ripple:i(24),ui_switch:i(14),scroll_pane:i(15),mouse_shim:i(25),double_click:i(26),checkbox:i(16),radio:i(17),border:i(27),curvedPlane:i(18),modal:i(28),renderer:i(19),yoga_properties:i(20)}}]);